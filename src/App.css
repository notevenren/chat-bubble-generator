/* CSS Custom Properties (Variables) for easy theming */
:root {
  --primary-color: #007bff; /* A modern blue for interactive elements */
  --primary-color-hover: #0056b3;
  --primary-color-active: #004085;

  --secondary-color: #6c757d; /* For less prominent elements or text */
  --success-color: #28a745; /* For success actions like download */
  --success-color-hover: #218838;

  --body-bg: #f4f6f8; /* Slightly different main background */
  --controls-panel-bg: #ffffff; /* Controls panel background */
  --input-bg: #ffffff;
  --input-border-color: #ced4da;
  --input-focus-border-color: #80bdff;
  --input-focus-box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);

  --text-color: #212529; /* Main text color */
  --text-color-muted: #6c757d;
  --text-color-headings: #343a40;

  --border-radius-base: 0.375rem; /* 6px */
  --border-radius-lg: 0.5rem;    /* 8px */

  --font-family-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* Global reset & base styles */
* {
  box-sizing: border-box;
}

body, html {
  margin: 0;
  font-family: var(--font-family-sans-serif);
  background: var(--body-bg);
  color: var(--text-color);
  line-height: 1.5;
}

/* App Container: column on mobile, row on desktop */
.app-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* Use min-height to allow content to expand */
}

/* Preview area: always center */
.preview {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  padding: 20px; /* Add some padding around the preview */
}

/* --- STYLES FOR THE MESSAGE BUBBLE (UNCHANGED as per request) --- */
.capture {
  position: relative;
}

.bubble p {
  margin: 0;
}

.avatar-img {
  border-radius: 50%;
  object-fit: cover;
}

.speech-tail {
  position: absolute;
  bottom: 0;
  overflow: visible;
  pointer-events: none;
}
/* --- END OF UNCHANGED MESSAGE BUBBLE STYLES --- */


/* CONTROLS PANEL */
.controls-panel {
  background: var(--controls-panel-bg);
  padding: 32px; /* Increased padding */
  display: grid;
  gap: 32px; /* Consistent gap */
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Slightly larger minmax */
  width: 100%;
  box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.07); /* Softer, more modern shadow */
  border-top: 1px solid #e9ecef; /* Subtle top border */
}

/* On desktop, move controls to right as a sidebar */
@media (min-width: 1024px) {
  .app-container {
    flex-direction: row;
    height: 100vh; /* Maintain full height for desktop layout */
  }
  .controls-panel {
    width: 360px; /* Slightly wider for more space */
    min-width: 320px;
    height: 100vh; /* Full height */
    overflow-y: auto; /* Allow scrolling if content overflows */
    box-shadow: -3px 0 15px rgba(0, 0, 0, 0.07);
    border-top: none;
    border-left: 1px solid #e9ecef; /* Subtle left border on desktop */
    padding: 32px 24px; /* Adjust padding for vertical layout */
    grid-template-columns: 1fr; /* Single column on desktop sidebar */
  }
}

/* Control Grouping */
.control-group {
  display: flex;
  flex-direction: column;
  gap: 16px; /* Increased gap within groups */
}

.control-group h3 {
  margin: 0 0 8px 0; /* Add some bottom margin */
  font-size: 1.1rem; /* Slightly larger */
  font-weight: 600;
  color: var(--text-color-headings);
  padding-bottom: 8px;
  border-bottom: 1px solid #eee; /* Subtle separator for heading */
}

/* Labels */
.controls-panel label {
  font-size: 0.875rem; /* 14px */
  font-weight: 500;
  color: var(--text-color-muted);
  margin-bottom: -8px; /* Pulls input slightly closer to label */
}

/* General Input, Select, Textarea Styling */
.controls-panel input[type="text"],
.controls-panel select,
.controls-panel textarea,
.controls-panel input[type="color"] {
  width: 100%;
  padding: 0.625rem 0.875rem; /* 10px 14px */
  font-size: 0.9375rem; /* 15px */
  border: 1px solid var(--input-border-color);
  border-radius: var(--border-radius-base);
  background-color: var(--input-bg);
  color: var(--text-color);
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.controls-panel input[type="text"]:focus,
.controls-panel select:focus,
.controls-panel textarea:focus,
.controls-panel input[type="color"]:focus {
  border-color: var(--input-focus-border-color);
  outline: 0;
  box-shadow: var(--input-focus-box-shadow);
}

.controls-panel select {
  appearance: none; /* Remove default arrow */
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.875rem center;
  background-size: 16px 12px;
  padding-right: 2.5rem; /* Make space for custom arrow */
}

.controls-panel textarea {
  resize: vertical;
  min-height: 80px;
}

.controls-panel input[type="color"] {
  padding: 0.25rem; /* Adjust padding for color input */
  height: 40px; /* Consistent height */
}

/* Range Sliders */
.controls-panel input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 8px; /* Slightly thicker track */
  border-radius: 4px;
  background: #e9ecef; /* Lighter track color */
  outline: none;
  margin-top: 8px; /* Add some space */
  margin-bottom: 4px;
}

.controls-panel input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px; /* Larger thumb */
  height: 20px;
  border-radius: 50%;
  background: var(--primary-color);
  cursor: pointer;
  border: 2px solid var(--controls-panel-bg); /* Border to make it pop from track */
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  transition: background-color 0.15s ease-in-out;
}

.controls-panel input[type="range"]::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--primary-color);
  cursor: pointer;
  border: 2px solid var(--controls-panel-bg);
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  transition: background-color 0.15s ease-in-out;
}

.controls-panel input[type="range"]::-webkit-slider-thumb:hover,
.controls-panel input[type="range"]::-moz-range-thumb:hover {
  background-color: var(--primary-color-hover);
}
.controls-panel input[type="range"]::-webkit-slider-thumb:active,
.controls-panel input[type="range"]::-moz-range-thumb:active {
  background-color: var(--primary-color-active);
}


/* File Input */
.controls-panel input[type="file"] {
  border: 1px dashed var(--input-border-color);
  padding: 0.5rem;
  background-color: #f8f9fa; /* Slightly different background for file input */
}

.controls-panel input[type="file"]::file-selector-button {
  margin-right: 0.75rem;
  border: 1px solid transparent;
  background: var(--secondary-color);
  padding: 0.5rem 0.75rem;
  border-radius: var(--border-radius-base);
  color: #fff;
  cursor: pointer;
  transition: background-color 0.15s ease-in-out;
}

.controls-panel input[type="file"]::file-selector-button:hover {
  background: #5a6268;
}

/* Download Button */
.download-btn {
  padding: 0.75rem 1.5rem; /* 12px 24px */
  font-size: 0.9375rem; /* 15px */
  font-weight: 600;
  background: var(--success-color);
  color: #fff;
  border: none;
  border-radius: var(--border-radius-lg);
  cursor: pointer;
  transition: background-color 0.15s ease-in-out, transform 0.1s ease;
  text-align: center;
  width: 100%; /* Make button full width in its group */
}

.download-btn:hover {
  background: var(--success-color-hover);
  transform: translateY(-1px); /* Subtle lift */
}

.download-btn:active {
  transform: translateY(0);
}

/* Export group alignment (especially on desktop) */
.export-group {
  margin-top: auto; /* Pushes to the bottom in flex/grid column */
}
@media (min-width: 1024px) {
    .export-group {
        align-self: stretch; /* Ensure it takes full width if needed */
        justify-self: stretch;
    }
}


/* Small screen tweaks */
@media (max-width: 600px) {
  .controls-panel {
    padding: 24px 16px; /* Adjust padding for smaller screens */
    gap: 24px;
  }
  .control-group {
    gap: 12px;
  }
  .control-group h3 {
    font-size: 1rem;
  }
  .controls-panel label {
    font-size: 0.8125rem; /* 13px */
  }
  .controls-panel input[type="text"],
  .controls-panel select,
  .controls-panel textarea,
  .controls-panel input[type="color"] {
    padding: 0.5rem 0.75rem; /* 8px 12px */
    font-size: 0.875rem; /* 14px */
  }
}
